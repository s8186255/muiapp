/*!
 * =====================================================
 * TS v1.0.0 ()
 * =====================================================
 */
!function(a,b){var c=a.className("left"),d=a.className("center"),e=a.className("right"),f=a.className("page"),g=a.className("page-left"),h=a.className("page-center"),i=a.className("navbar-left"),j=a.className("navbar-center"),k=a.className("page-shadow"),l=a.className("transitioning"),m="."+c,n="."+d,o="."+e,p=a.classSelector(".icon"),q=a.classSelector(".navbar"),r=a.classSelector(".navbar-inner"),s=a.classSelector(".pages"),t=a.classSelector(".btn-nav"),u="."+g,v="."+h,w="."+i,x="."+j,y=a.Class.extend({init:function(b,c){this.view=this.element=b,this.options=a.extend({animateNavbar:"ios",swipeBackPageActiveArea:30,hardwareAccelerated:!0},c),this.navbars=this.view.querySelector(q),this.pages=this.view.querySelector(s),this.history=[],this.maxScrollX=this.view.offsetWidth,this.x=this.y=0,this.translateZ=this.options.hardwareAccelerated?" translateZ(0)":"",this.ratio=0,this.isBack=!0,this.moved=this.dragging=!1,this.activeNavbar=this.previousNavbar=null,this.activePage=this.previousPage=null,this._initPageEventMethod(),this._initDefaultPage(),this.navbars&&this._initNavBar(),this.initEvent()},_initPageEventMethod:function(){var b=this;a.each(["onPageBeforeShow","onPageShow","onPageBeforeBack","onPageBack"],function(a,c){b[c+"Callbacks"]={},b[c]=function(a,d){var e=c+"Callbacks";b[e].hasOwnProperty(a)?b[e][a].push(d):b[e][a]=[d]}})},_initDefaultPage:function(){var a=document.querySelector(this.options.defaultPage);if(!a)throw new Error("defaultPage["+this.options.defaultPage+"] does not exist");this._appendPage(a)},initEvent:function(){this.view.addEventListener("click",this),this.view.addEventListener("tap",this),this.pages.addEventListener("drag",this),this.pages.addEventListener("dragend",this),this.pages.addEventListener("transitionEnd",this),this.pages.addEventListener("webkitTransitionEnd",this)},handleEvent:function(a){switch(a.type){case"click":this._click(a);break;case"tap":this._tap(a);break;case"drag":this._drag(a);break;case"dragend":this._dragend(a);break;case"transitionEnd":case"webkitTransitionEnd":this._webkitTransitionEnd(a)}},shadow:function(){var a=document.createElement("div");return a.className=k,a}(),_removePage:function(a,b){b&&this._removeNavbar(a,b),document.body.appendChild(a),this._cleanPageClass(a)},_prependPage:function(a){var b=a.querySelector(r);b&&this._prependNavbar(b),a.classList.add(g),this.pages.insertBefore(a,this.pages.firstElementChild)},_appendPage:function(a){var b=a.querySelector(r);b&&this._appendNavbar(b),a.classList.add(h),this.pages.appendChild(a)},_removeNavbar:function(a,b){a.insertBefore(b,a.firstElementChild),this._cleanNavbarClass(b)},_prependNavbar:function(a){a.classList.add(i),this.navbars.insertBefore(a,this.navbars.firstElementChild)},_appendNavbar:function(a){a.classList.add(j),this.navbars.appendChild(a)},_cleanPageClass:function(a){a.classList.remove(h),a.classList.remove(g)},_cleanNavbarClass:function(a){a.classList.remove(j),a.classList.remove(i)},_tap:function(a){for(var b=a.target;b&&b!==document;b=b.parentNode)if("A"===b.tagName&&b.hash){var c=document.getElementById(b.hash.replace("#",""));if(c&&c.classList.contains(f)){a.stopPropagation(),a.detail.gesture.preventDefault(),this.go(b.hash);break}}},_click:function(a){for(var b=a.target;b&&b!==document;b=b.parentNode)if("A"===b.tagName&&b.hash){var c=document.getElementById(b.hash.replace("#",""));if(c&&c.classList.contains(f)){a.preventDefault();break}}},_cleanStyle:function(a){a&&(a.style.webkitTransform="",a.style.opacity="")},_isAnimateNavbarIOS:function(){return a.os.ios&&"ios"===this.options.animateNavbar},_webkitTransitionEnd:function(b){if(this.dragging=this.moved=!1,this.activePage===b.target){this.isInTransition=!1,this.shadow.parentNode===this.activePage&&this.activePage.removeChild(this.shadow),this.previousPageClassList.remove(l),this.activePageClassList.remove(l);var c=this;if(this._isAnimateNavbarIOS()&&this.previousNavElements&&this.activeNavElements){var d=this.isBack;a.each(this.previousNavElements,function(a,b){b.classList.remove(l),d&&c._cleanStyle(b)}),a.each(this.activeNavElements,function(a,b){b.classList.remove(l),c._cleanStyle(b)}),this.previousNavBackIcon&&(this.previousNavBackIcon.classList.remove(l),d&&this._cleanStyle(this.previousNavBackIcon)),this.activeNavBackIcon&&(this.activeNavBackIcon.classList.remove(l),this._cleanStyle(this.activeNavBackIcon))}else this.previousNavbar&&this.previousNavbar.classList.remove(l),this.activeNavbar&&this.activeNavbar.classList.remove(l),this._cleanStyle(this.previousNavbar),this._cleanStyle(this.activeNavbar);this._cleanStyle(this.previousPage),this._cleanStyle(this.activePage),this.ratio<=.5||(this.isBack?(this._removePage(this.activePage,this.activeNavbar),this.previousPageClassList.remove(g),this.previousPageClassList.add(h),this.previousNavbar&&(this.previousNavbar.classList.remove(i),this.previousNavbar.classList.add(j)),this.history.length>0&&this._prependPage(this.history.pop()),this.navbars&&this._initNavBar(),this._trigger("pageBack",this.activePage),this._trigger("pageShow",this.previousPage)):(this.previousPageClassList.add(g),this.activePageClassList.add(h),this._trigger("pageShow",this.activePage)))}},_trigger:function(b,c){var d="on"+b.charAt(0).toUpperCase()+b.slice(1)+"Callbacks";if(this[d].hasOwnProperty(c.id))for(var e=this[d][c.id],f=new CustomEvent(b,{detail:{page:c},bubbles:!0,cancelable:!0}),g=e.length;g--;)e[g].apply(this,f);a.trigger(this.view,b,{page:c})},_initPageTransform:function(){return this.previousPage=this.pages.querySelector(u),this.activePage=this.pages.querySelector(v),this.previousPage&&this.activePage?(this.activePage.appendChild(this.shadow),this.previousPageClassList=this.previousPage.classList,this.activePageClassList=this.activePage.classList,this.previousPageStyle=this.previousPage.style,this.activePageStyle=this.activePage.style,this.previousPageClassList.remove(l),this.activePageClassList.remove(l),this.navbars&&(this.previousNavbar=this.navbars.querySelector(w),this.activeNavbar=this.navbars.querySelector(x),this._isAnimateNavbarIOS()&&this.previousNavbar&&this.activeNavbar&&(this.previousNavElements=this.previousNavbar.querySelectorAll(m+","+n+","+o),this.activeNavElements=this.activeNavbar.querySelectorAll(m+","+n+","+o),this.previousNavBackIcon=this.previousNavbar.querySelector(m+t+" "+p),this.activeNavBackIcon=this.activeNavbar.querySelector(m+t+" "+p))),this.x=0,this.dragging=!0,!0):!1},_initNavBar:function(){if(this._isAnimateNavbarIOS()&&this.navbars)for(var a,b,c,d,e,f,g,h,i,j,k,l=this.navbars.querySelectorAll(r),p=0,q=l.length;q>p;p++){a=l[p],b=a.querySelector(m),c=a.querySelector(o),d=a.querySelector(n),h=!b,noRight=!c,e=h?0:b.offsetWidth,f=noRight?0:c.offsetWidth,g=d?d.offsetWidth:0,k=this.maxScrollX,onLeft=a.classList.contains("navbar-left"),noRight&&(i=k-g),h&&(i=0),h||noRight||(i=(k-f-g+e)/2);var s=(k-g)/2;k-e-f>g?(e>s&&(s=e),s+g>k-f&&(s=k-f-g),j=s-i):j=0;d&&(d.style.marginLeft=-e+"px",d.mNavbarLeftOffset=-(i+j)+30,d.mNavbarRightOffset=k-i-j-g),onLeft&&(d.style.webkitTransform="translate3d("+d.mNavbarLeftOffset+"px, 0, 0)"),h||(b.mNavbarLeftOffset=-e,b.mNavbarRightOffset=(k-e)/2,onLeft&&(b.style.webkitTransform="translate3d("+b[0].mNavbarLeftOffset+"px, 0, 0)")),noRight||(c.mNavbarLeftOffset=-(k-f)/2,c.mNavbarRightOffset=f,onLeft&&(c.style.webkitTransform="translate3d("+c[0].mNavbarLeftOffset+"px, 0, 0)"))}},_drag:function(b){if(!this.isInTransition){var c=b.detail;if(this.dragging||c.start.x-this.view.offsetLeft<this.options.swipeBackPageActiveArea&&(this.isBack=!0,this._initPageTransform()),this.dragging){var d=0;this.moved?d=c.deltaX-c.lastDeltaX:(d=c.deltaX,a.gestures.touch.lockDirection=!0,a.gestures.touch.startDirection=c.direction);var e=this.x+d;(0>e||e>this.maxScrollX)&&(e=0>e?0:this.maxScrollX),b.stopPropagation(),c.gesture.preventDefault(),this.requestAnimationFrame||this._updateTranslate(),this.moved=!0,this.x=e,this.y=0}}},_dragend:function(b){if(this.moved){b.stopPropagation();b.detail;return this._clearRequestAnimationFrame(),this._prepareTransition(),this.ratio=this.x/this.maxScrollX,1===this.ratio||0===this.ratio?void a.trigger(this.activePage,"webkitTransitionEnd"):void(this.ratio>.5?this.setTranslate(this.maxScrollX,0):(this._cleanStyle(this.previousPage),this._cleanStyle(this.activePage)))}},_prepareTransition:function(){this.isInTransition=!0,this.previousPageClassList.add(l),this.activePageClassList.add(l);var b=this;this.previousNavbar&&this.activeNavbar&&(this.previousNavbar.classList.add(l),this.activeNavbar.classList.add(l),this._isAnimateNavbarIOS()&&this.previousNavElements&&this.activeNavElements&&(a.each(this.previousNavElements,function(a,c){c.classList.add(l),b._cleanStyle(c)}),a.each(this.activeNavElements,function(a,c){c.classList.add(l),b._cleanStyle(c)}),this.previousNavBackIcon&&(this._cleanStyle(this.previousNavBackIcon),this.previousNavBackIcon.classList.add(l)),this.activeNavBackIcon&&(this._cleanStyle(this.activeNavBackIcon),this.activeNavBackIcon.classList.add(l))))},_clearRequestAnimationFrame:function(){this.requestAnimationFrame&&(cancelAnimationFrame(this.requestAnimationFrame),this.requestAnimationFrame=null)},_getTranslateStr:function(a,b){return this.options.hardwareAccelerated?"translate3d("+a+"px,"+b+"px,0px) "+this.translateZ:"translate("+a+"px,"+b+"px) "},_updateTranslate:function(){var a=this;(a.x!==a.lastX||a.y!==a.lastY)&&a.setTranslate(a.x,a.y),a.requestAnimationFrame=requestAnimationFrame(function(){a._updateTranslate()})},_setNavbarTranslate:function(a,b){var c=a/this.maxScrollX;this._isAnimateNavbarIOS()?this.previousNavElements&&this.activeNavElements&&this.animateNavbarByIOS(c):(this.activeNavbar.style.opacity=1-1.3*c,this.previousNavbar.style.opacity=1.3*c-.3)},animateNavbarByIOS:function(a){var b,d,f,g;for(b=0,d=this.activeNavElements.length;d>b;b++)if(g=this.activeNavElements[b],f=g.style,f.opacity=1-a*(g.classList.contains(c)?3.5:1.3),!g.classList.contains(e)){var h=a*g.mNavbarRightOffset;g.style.webkitTransform="translate3d("+h+"px,0,0)",g.classList.contains(c)&&this.activeNavBackIcon&&(this.activeNavBackIcon.style.webkitTransform="translate3d("+-h+"px,0,0)")}for(b=0,d=this.previousNavElements.length;d>b;b++)if(g=this.previousNavElements[b],f=g.style,f.opacity=1.3*a-.3,!g.classList.contains(e)){var i=g.mNavbarLeftOffset*(1-a);g.style.webkitTransform="translate3d("+i+"px,0,0)",g.classList.contains(c)&&this.previousNavBackIcon&&(this.previousNavBackIcon.style.webkitTransform="translate3d("+-i+"px,0,0)")}},setTranslate:function(a,b){this.x=a,this.y=b,this.previousPage.style.opacity=.9+.1*a/this.maxScrollX;var c=this._getTranslateStr(a/6-this.maxScrollX/6,b),d=this._getTranslateStr(a,b);this.previousPage.style.webkitTransform=c,this.activePage.style.webkitTransform=d,this.navbars&&this._setNavbarTranslate(a,b),this.lastX=this.x,this.lastY=this.y},canBack:function(){return this.pages.querySelector(u)},back:function(){this.isInTransition||(this.isBack=!0,this.ratio=1,this._initPageTransform()&&(this._trigger("pageBeforeBack",this.activePage),this._trigger("pageBeforeShow",this.previousPage),this._prepareTransition(),this.previousPage.offsetHeight,this.activePage.offsetHeight,this.setTranslate(this.maxScrollX,0)))},go:function(a){if(!this.isInTransition){var b=document.querySelector(a);if(b){var c,d,e=this.pages.querySelector(u),f=this.pages.querySelector(v);this.navbars&&(c=this.navbars.querySelector(w),d=this.navbars.querySelector(x)),d&&(d.classList.remove(j),d.classList.add(i)),e&&(this._removePage(e,c),this.history.push(e)),f&&(f.classList.remove(h),f.style.webkitTransform=this.options.hardwareAccelerated?"translate3d(0,0,0)":"translate(0,0)",f.classList.add(g)),b.style.webkitTransform=this.options.hardwareAccelerated?"translate3d(100%,0,0)":"translate(100%,0)",this._appendPage(b),b.appendChild(this.shadow),b.offsetHeight,this.isBack=!1,this.ratio=1,this._initPageTransform(),this.navbars&&this._initNavBar(),this.navbars&&this._setNavbarTranslate(this.maxScrollX,0),this.previousPage.offsetHeight,this.activePage.offsetHeight,this.navbars&&(this.previousNavbar.offsetHeight,this.activeNavbar.offsetHeight),this._trigger("pageBeforeShow",this.activePage),this._prepareTransition(),this.setTranslate(0,0)}}}});a.fn.view=function(b){var c=this[0],d=null,e=c.getAttribute("data-view");return e?d=a.data[e]:(e=++a.uuid,a.data[e]=d=new y(c,b),c.setAttribute("data-view",e)),d}}(mui,window);