/*!
 * =====================================================
 * TS v1.0.0 ()
 * =====================================================
 */
window.TS={env:"production",base:"https://www.4000121777.com/m/",url:"https://www.4000121777.com/api3",app_id:20,app_secret:"f45571c676e1fbe7d065f26aced7d666",app_version:"1.0",market:{ios:"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=688185140&pageNumber=0&sortOrdering=2&type=&mt=8",android:"market://details?id=com.internet.tiaoshi"},share:{combodetail:"come on！发现一个实惠美味的火锅套餐，看着就流口水，你也来看看吧！",my:{title:"come on！咱们来次火锅吧，挑食火锅美食送到家，在家聚会宴请更方便快捷了！http://www.4000121777.com/app/download",content:"come on！咱们来次火锅吧，挑食火锅美食送到家，在家聚会宴请更方便快捷了！http://www.4000121777.com/app/download",href:"http://www.4000121777.com/app/download"}},map:"amap",baidu_ak:"xfGYVAIbHHQHXGusD2X31qMk",cache:{image:!1},data:{nav:[{id:"home",title:"首页",icon:"home",url:"../../index.html"},{id:"order",title:"订单",icon:"list",url:"../order/order.html"},{id:"my",title:"我的",icon:"person",url:"../my/my.html"}]}},function(a,b,c,d){b.debug="development"===b.env,a.extend(b,{error:function(a){b.alert(a)},backUrl:"../../index.html",loginUrl:~d.location.href.indexOf("/page/")?"../login/login.html":"page/login/login.html",addressUrl:~d.location.href.indexOf("/page/")?"../sites/sites.html":"page/sites/sites.html",d:Function.prototype.bind.call(console.debug,console),a:d.createElement("a"),div:d.createElement("div"),decodeRegexp:/\+/g,paramRegexp:/([^&=]+)=?([^&]*)/g,decode:function(a){return decodeURIComponent(a.replace(this.decodeRegexp," "))},parseParams:function(a){var b={};if(a=a&&(0===a.indexOf("?")?a.replace("?",""):a))for(var c;c=this.paramRegexp.exec(a);)b[this.decode(c[1])]=this.decode(c[2]);return b},template:function(a,b,c,e){var f=d.getElementById(a);if(f){var g,h=template(b,c);if("return"===e)return h;if("append"===e){var i=d.createDocumentFragment();for(this.div.innerHTML=h;g=this.div.firstElementChild;)i.appendChild(g);f.appendChild(i)}else if("prepend"===e){var i=d.createDocumentFragment();for(this.div.innerHTML=h;g=this.div.firstElementChild;)i.appendChild(g);f.insertBefore(i,f.firstElementChild)}else f.innerHTML=h}},handleOpen:function(a,b){b()},createLoading:function(){return b.loading=d.getElementById("TS_LOADING"),b.loading||(b.loading=d.createElement("div"),b.loading.id="TS_LOADING",b.loading.className="mui-backdrop",b.loading.innerHTML='<span class="mui-spinner mui-spinner-white"></span>'),b.loading}(),showWaiting:function(){d.body.appendChild(b.createLoading)},closeWaiting:function(){b.loading&&b.loading.parentNode&&b.loading.parentNode.removeChild(b.loading)},alert:function(b,c,d,e){a.alert(b,c||"提示",d,e)},prompt:function(b,c,d){a.prompt(b,c,"提示",["确定","取消"],function(a){0===a.index?d&&d(a.value):d&&d(a.value)})},confirm:function(b,c,d){a.isFunction(c)&&(d=c,c="提示"),a.confirm(b,c,["确认","取消"],function(a){d(0===a.index?!0:!1)})},toast:function(b){a.toast(b)},open:function(a,c){b.Init.open(a,c)},openLogin:function(a){b.Init.open(b.loginUrl+"?from="+encodeURIComponent(a||""))},order_status:function(a){switch(a){case 1:return"未付款";case 21:return"待确认";case 22:return"已确认";case 3:return"取餐中";case 4:return"配送中";case 5:return"已送达";case 6:return"退款中";case 8:return"已退款";case 9:return"已取消";case 31:return"已完结";default:return"未知"}},isStatusbarOffset:function(){return!1}}),b.Init=a.Class.extend({init:function(a){this.initConfig(),this.initEvent(),this.initOs(),a&&new b[a+"Page"]},initConfig:function(c){b.debug&&(a.ajaxSettings.beforeSend=function(a,c){b.d("beforeSend:::"+JSON.stringify(c))}),b.Init=this,b.Api=new b.ApiClass,b.User=new b.UserClass,b.Site=new b.SiteClass,b.Location=new b.LocationClass},initEvent:function(){var c=this,e=a.back;a.back=function(){if(b.backUrl){if("function"==typeof a.options.beforeback&&a.options.beforeback()===!1)return;d.location.href=b.backUrl}else e()},a(d.body).on("tap","a[data-href]",function(a){var d=a.target.tagName;if("BUTTON"===d||"INPUT"===d)return!1;var e=this.getAttribute("data-href"),f=this.getAttribute("data-login"),g=this.getAttribute("data-address");e&&("true"===f?b.User.isLogin()?c.checkAddress(g,e):b.confirm("您当前还未登录，请登录",function(a){a&&c.open(b.loginUrl)}):c.checkAddress(g,e))})},checkAddress:function(a,c){var d=this;"true"===a?b.Site.get_address()?d.open(c):b.confirm("您还未填写地址，请新增地址",function(a){a&&d.open(b.addressUrl)}):d.open(c)},open:function(c,e){c+=e?(~c.indexOf("?")?"&":"?")+a.param(e):"",b.handleOpen({href:c},function(){b.a.href=c,d.location.href=b.a.href})},initOs:function(){a.os.plus||a.each(d.querySelectorAll(".mui-plus-visible"),function(a,b){b.parentNode.removeChild(b)})}})}(mui,TS,window,document),function(a,b,c){a.extend(b,{setItem:function(a,b){return c.localStorage.setItem(a,b)},getItem:function(a){return c.localStorage.getItem(a)},removeItem:function(a){return c.localStorage.removeItem(a)}})}(mui,TS,window),function(a,b){b.ApiClass=a.Class.extend({init:function(){this.initConfig()},initConfig:function(){this.url=b.url,this.app_id=b.app_id,this.app_secret=b.app_secret,this.app_version=b.app_version},getRequest:function(c){return!b.User.isLogin()||~["login","oauth_login"].indexOf(c)?a.now():b.User.get_session()},getSign:function(a,c){return b.debug&&b.d("sig:"+this.app_secret+"|"+(this.getRequest(a)+"").trim()+"|"+c.trim()),"e9f22899fd16393ffac0a88f01eef690"},getParams:function(a){return a.app_id=this.app_id,a.app_version=this.app_version,JSON.stringify(a)},success:function(a){return b.debug&&b.d(JSON.stringify(a)),a.return_code>0?(b.error(a.data),b.closeWaiting(),!1):!0},error:function(a,c,d,e){return b.debug&&b.d(c+"|"+d),e&&e(a,c,d),!0},post:function(b,c,d,e){a.isFunction(c)&&(e=d,d=c,c={}),c=this.getParams(c);var f=this.getSign(b,c),g=this;a.ajax({type:"post",url:this.url,dataType:"json",crossDomain:!0,data:{request:this.getRequest(b),action:b,param:c,sig:f},success:function(a,b,c){g.success(a)&&d&&d(a)},error:function(a,b,c){g.error(a,b,c)&&e&&e(a,b,c)}})},get_location:function(a,b){this.post("get_location",a,b)},get_activity:function(c,d,e){a.isFunction(c)&&(e=d,d=c,c=b.Location.get_city_id()),a.isPlainObject(c)||(c={city_id:c}),this.post("get_activity",a.extend({city_id:"",current:0,size:5},c),d,e)},get_nearest_station:function(c,d,e,f,g){var h=this;"string"==typeof c?h._get_nearest_station_byaddress(c,d,e):a.isFunction(c)?(f=c,g=d,c=b.Location.get_city_id(),b.Location.getCurrentPosition(function(a){h._get_nearest_station(c,a.coords.longitude,a.coords.latitude,f,g)})):h._get_nearest_station(c,d,e,f,g)},_get_nearest_station_byaddress:function(a,b,c){this.post("get_nearest_station",{address:a},b,c)},_get_nearest_station:function(a,c,d,e,f){this.post("get_nearest_station",{city_id:a,longitude:c,latitude:d,from:b.map},e,f)},get_station_item:function(b,c,d){a.isPlainObject(b)||(b={station_id:b}),this.post("get_station_item",a.extend({station_id:"",current:0,size:5,item_data:""},b),c,d)},get_item_detail:function(a,b,c){this.post("get_item_detail",{item_id:a},b,c)},get_item_material:function(a,b,c){this.post("get_item_material",{item_id:a},b,c)},get_station_combo:function(b,c,d){a.isPlainObject(b)||(b={station_id:b}),this.post("get_station_combo",a.extend({station_id:"",current:0,size:5,item_data:""},b),c,d)},get_combo_detail:function(a,b,c){this.post("get_combo_detail",{combo_id:a},b,c)},login:function(a,b,c,d){this.post("login",{phone:a,sms:b},c,d)},oauth_login:function(b,c,d){b=a.extend({imei:"",oauth_type:"",oauth_uid:"",oauth_token:"",oauth_token_secret:"",refresh_token:"",screenname:"",union_id:"",avatar:""},b),this.post("oauth_login",b,c,d)},approve_phone:function(a,b,c,d,e,f){this.post("approve_phone",{user_id:a,phone:b,sms:c,sig:d},e,f)},get_sms:function(b,c,d,e,f){a.isFunction(d)&&(f=e,e=d,d="");var g={type:b,phone:c};d&&(g.user_id=d),this.post("get_sms",g,e,f)},get_coupon_list:function(b,c,d){a.isPlainObject(b)||(b={user_id:b}),this.post("get_coupon_list",a.extend({user_id:"",current:0,size:10},b),c,d)},add_coupon:function(a,b,c,d){this.post("add_coupon",{user_id:a,coupon_code:b},c,d)},delete_coupon:function(a,b,c,d){this.post("delete_coupon",{user_id:a,coupon_id:b},c,d)},get_site_list:function(a,b,c){this.post("get_site_list",{user_id:a},b,c)},add_usersite:function(b,c,d){this.post("add_usersite",a.extend({user_id:"",sms:"",city_id:"",region_id:"",limit_id:0,address:"",consignee_phone:"",consignee_name:""},b),c,d)},edit_usersite:function(b,c,d){this.post("edit_usersite",a.extend({user_id:"",site_id:"",region_id:"",address:"",consignee_phone:"",consignee_name:""},b),c,d)},delete_site:function(a,b,c,d){this.post("delete_site",{user_id:a,site_id:b},c,d)},remove_all_site:function(a,b,c){this.post("remove_all_site",{user_id:a},b,c)},get_order_list:function(b,c,d){a.isPlainObject(b)||(b={user_id:b}),this.post("get_order_list",a.extend({user_id:"",current:0,size:10},b),c,d)},get_order_detail:function(a,b,c){this.post("get_order_detail",{order_no:a},b,c)},cancel_order:function(a,b,c,d){this.post("cancel_order",{user_id:a,order_no:b},c,d)},pay_order:function(a,b,c,d,e){this.post("pay_order",{order_no:a,pay_status:b,order_sum:c},d,e)},set_order_pay_way:function(a,b,c,d,e,f){this.post("set_order_pay_way",{user_id:a,order_no:b,pay_channel:c,pay_way:d},e,f)},order_apply_refund:function(a,b,c,d){this.post("order_apply_refund",{user_id:a,order_no:b},c,d)},submit_order:function(b,c,d,e){this.post("submit_order",a.extend({user_id:b,site_id:"",item_id:"",station:"",distance_rank:"",people_num:"",dinner_time:"",dinner_time_section:"",material_sum:"",order_act:"",order_service:"",pay_count:"",materials:"",acts:"",pay_way:"",pay_channel:"",remark:"",has_tableware:""},c),d,e)},get_order_track_info:function(a,b,c,d){this.post("get_order_track_info",{user_id:a,order_no:b},c,d)},get_order_success_share:function(a,b,c,d){this.post("get_order_success_share",{user_id:a,order_no:b},c,d)},apply_back_tableware:function(a,b,c,d){this.post("apply_back_tableware",{user_id:a,order_no:b},c,d)},get_carts:function(b,c,d,e,f,g){a.isFunction(d)?(g=e,f=d,e=!0,d=""):a.isFunction(e)&&(g=f,f=e,e=!0);var h={user_id:b,city_id:c,type:e};d&&(h.item_id=d),this.post("get_carts",h,f,g)},add_minus_cart:function(b,c,d,e){this.post("add_minus_cart",a.extend({user_id:b,city_id:"",item_id:"",materials:"",acts:"",station:"",distance_rank:""},c),d,e)},update_select_cart:function(a,b,c,d){this.post("update_select_cart",{user_id:a,carts:b},c,d)},delete_cart:function(a,b,c,d){this.post("delete_cart",{user_id:a,cart_ids:b},c,d)},cart_submit_order:function(b,c,d,e,f,g){e=a.extend({user_id:b,site_id:c,station:d,distance_rank:"",cart_ids:"",coupon_id:"",people_num:"",dinner_time:"",dinner_time_section:"",invoice:"",material_sum:"",order_act:"",order_service:"",coupon_num:"",pay_count:"",has_tableware:"",remark:"",pay_way:"",pay_channel:""},e),e.site_id||delete e.site_id,this.post("cart_submit_order",a.extend({user_id:b,site_id:c,station:d,distance_rank:"",cart_ids:"",coupon_id:"",people_num:"",dinner_time:"",dinner_time_section:"",invoice:"",material_sum:"",order_act:"",order_service:"",coupon_num:"",pay_count:"",has_tableware:"",remark:"",pay_way:"",pay_channel:""},e),f,g)},get_banners:function(a,b,c){this.post("get_banners",{city_id:a},b,c)},get_award_list:function(a,b,c){this.post("get_award_list",{city_id:a},b,c)},post_award:function(a,b,c,d){this.post("post_award",{user_id:a,award_id:b},c,d)},version:function(a,b){this.post("version",a,b)},feedback:function(a,b,c){this.post("feedback",{feedback:a},b,c)},post_first_device:function(a,b){this.post("post_first_device",a,b)},get_act_list:function(b,c,d,e){a.isFunction(c)&&(e=d,d=c,c=5),this.post("get_act_list",{current:b,size:c},d,e)},weixin_pay:function(a,b,c,d){this.post("weixin_pay",{order_no:a,user_ip:b},c,d)},ali_pay:function(a,b,c,d){this.post("ali_pay",{order_no:a,user_ip:b},c,d)}})}(mui,TS),function(a,b){b.LocationClass=a.Class.extend({cache_key:"ADDRESS",station_cache_key:"STATION",city_cache_key:"CITY",latitude:0,longitude:0,station_id:2,init:function(){this.initConfig()},initConfig:function(){},getLocation:function(b,c){var d=this;a.isFunction(b)&&(c=b,b=null),b?d.getAddress(b,c):this.getCurrentPosition(function(a){var b=a.coords;d.latitude=b.latitude,d.longitude=b.longitude,d.getAddress(a,c)},function(){c(!1)})},getCurrentPosition:function(a,b){navigator.geolocation?navigator.geolocation.getCurrentPosition(a,b,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):b&&b()},getAddress:function(a,c){"amap"===b.map&&"undefined"!=typeof AMap?this.getAddressByAmap(a,c):this.getAddressByBaidu(a,c)},getAddressByAmap:function(a,c){var d=this,e=a.coords;b.debug&&b.d("poi[amap]::::"+JSON.stringify(a));var f,g=new AMap.LngLat(e.longitude,e.latitude);AMap.service(["AMap.Geocoder"],function(){f=new AMap.Geocoder({radius:1e3,extensions:"base"}),f.getAddress(g,function(a,f){if(b.debug&&b.d("[amap]::::"+a+","+JSON.stringify(f)),"complete"===a&&"OK"===f.info){var g={latitude:e.latitude,longitude:e.longitude,address:f.regeocode.formattedAddress};d.set_location(g,function(){c(g)})}})})},getAddressByBaidu:function(c,d){var e=this,f=c.coords;b.debug&&b.d("poi[baidu]::::"+JSON.stringify(c)),a.ajax({type:"get",url:"http://api.map.baidu.com/geocoder/v2/",dataType:"json",data:{ak:b.baidu_ak,output:"json",pois:0,location:f.latitude+","+f.longitude},success:function(a){if(b.debug&&b.d(JSON.stringify(a)),0==a.status){var c={latitude:f.latitude,longitude:f.longitude,address:a.result.formatted_address};e.set_location(c,function(){d(c)})}else d(!1)},error:function(){d(!1)}})},initCity:function(a){var c=this;b.Api.get_location(function(d){b.setItem(c.city_cache_key,JSON.stringify(d.data)),a&&a(d.data)},function(){a&&a(!1)})},set_location:function(c,d){var e=this;if(a.isPlainObject(c))b.setItem(this.cache_key,JSON.stringify(c)),c.address?b.Api.get_nearest_station(c.address,function(a){a.data?(e.set_station(a.data),d&&d(!0)):d&&d(!1)},function(){e.set_station(),d&&d(!1)}):d&&d(!1);else{var f=e.get_location();f?(f.address=c,e.set_location(f,d)):e.set_location({address:c},d)}},get_location:function(){var a=b.getItem(this.cache_key);if(a)try{return JSON.parse(a)}catch(c){return!1}return!1},get_station:function(){var a=b.getItem(this.station_cache_key);if(a)try{return JSON.parse(a)}catch(c){return!1}return!1},set_station:function(a){a&&b.setItem(this.station_cache_key,JSON.stringify(a))},get_distance_rank:function(){return 0},get_city:function(c){var d=b.getItem(this.city_cache_key);if(d)try{var e=JSON.parse(d);if(c){var f=!1;return a.each(e,function(a,b){return b.id==c?(f=b,!1):void 0}),f}return e}catch(g){return!1}return!1},get_city_id:function(){var a=this.get_station();return a&&a.region_id||1},get_city_name:function(){var a=this.get_city_id();if(a){var b=this.get_city(a);if(b)return b.name}return"北京市"},get_station_id:function(){var a=b.getItem(this.station_cache_key);if(a)try{a=JSON.parse(a)}catch(c){a=this.station_id}return a&&a.station_id||this.station_id}})}(mui,TS),function(a,b){b.LoginClass=a.Class.extend({login:function(a,c,d){b.Api.login(a,c,function(a){d&&d(a)},function(){d&&d(!1)})},logout:function(a){b.User.logout(a)},loginByQihoo:function(){b.error("暂不支持")},loginByWechat:function(){b.error("暂不支持")},loginBySina:function(){b.error("暂不支持")},loginByQq:function(){b.error("暂不支持")}})}(mui,TS),function(a,b){b.UserClass=a.Class.extend({cache_key:"USER",info_cache_key:"USER_INFO",init:function(a){a&&b.setItem(this.cache_key,JSON.stringify(a))},initUserinfo:function(a){a&&b.setItem(this.info_cache_key,JSON.stringify(a))},logout:function(a){b.removeItem(this.cache_key),b.removeItem(this.info_cache_key),a&&a()},get_userinfo:function(a){var c=b.getItem(this.info_cache_key);try{return JSON.parse(c)}catch(d){return!1}return!1},get_user:function(){var a=b.getItem(this.cache_key);if(a)try{var c=JSON.parse(a),d=this.get_userinfo();return d?(c.userinfo=d,c.user_name=d.nickname||c.phone||""):c.user_name=c.phone,c}catch(e){return!1}return!1},get_user_name:function(){var a=this.get_user();return a&&a.user_name||""},get_user_id:function(){var a=this.get_user();return a&&a.user_id||""},get_phone:function(){var a=this.get_user();return a&&a.phone||""},get_expired:function(){var a=this.get_user();return a&&a.expired||""},get_session:function(){var a=this.get_user();return a&&a.session||""},isLogin:function(){var a=this.get_user();return a&&a.session?!0:!1}})}(mui,TS),function(a,b){b.SiteClass=a.Class.extend({cache_key:"SITE",sites:{},init:function(b){var c=this;if(b){c.sites={};var d;a.each(b,function(a,b){c.sites[b.site_id]=b,d||(d=b)}),c.set_site(d)}},clear:function(){b.removeItem(this.cache_key)},get_site_id:function(){var a=this.get_site();return a&&a.site_id||""},get_address:function(){var a=this.get_site();return a&&a.address||""},get_consignee_name:function(){var a=this.get_site();return a&&a.consignee_name||""},get_consignee_phone:function(){var a=this.get_site();return a&&a.consignee_phone||""},set_site:function(c){return a.isPlainObject(c)||(c=this.sites[c]),c&&b.setItem(this.cache_key,JSON.stringify(c)),this},get_site:function(){var a=b.getItem(this.cache_key);if(a)try{return JSON.parse(a)}catch(c){return!1}return!1},add_site:function(a,c,d,e,f,g,h,i,j){var k={site_id:c,user_id:a,region_id:d,longitude:e,latitude:f,address:g,consignee_phone:h,consignee_name:i};b.Api.add_site(k,function(a){j(!0)},function(){j(!1)})},edit_site:function(a,c,d,e,f,g,h,i){var j=a&&this.sites[a];if(j){var k={site_id:a,user_id:j.user_id,region_id:c,longitude:d,latitude:e,address:f,consignee_phone:g,consignee_name:h};b.Api.edit_site(k,function(a){i(!0)},function(){i(!1)})}},delete_site:function(a){var c=a&&this.sites[a];c&&b.Api.delete_site(c.user_id,c.site_id,function(a){},function(){})}})}(mui,TS),function(a,b){b.CartClass=a.Class.extend({cart_id:"",item_id:"",item_base:0,item_name:"",item_image:"",material_price:0,act_price:0,station:0,distance_rank:0,service_percent:.1,coupon_price:0,cart_service:0,expire_date:0,materials:[],acts:[],init:function(b){this.cart_id="",this.item_id="",this.item_base=0,this.item_name="",this.item_image="",this.material_price=0,this.act_price=0,this.station=0,this.distance_rank=0,this.service_percent=.1,this.coupon_price=0,this.cart_service=0,this.expire_date=0,this.materials=[],this.acts=[],a.isEmptyObject(b)||a.extend(this,b||{})},toObject:function(){var b={};for(var c in this)a.isFunction(this[c])||(b[c]=this[c]);return b.cartid=b.cart_id,a.each(b.materials,function(a,b){b.count=b.num}),b},addMaterial:function(a,b,c,d,e){return this._addItem("materials",a,b,c,d,e)},addAct:function(a,b,c,d,e){return this._addItem("acts",a,b,c,d,e)},_calMaterialPrice:function(){var b=0;a.each(this.materials,function(a,c){b+=c.price*c.num}),this.material_price=b},_addItem:function(b,c,d,e,f,g){var h={};h=a.isPlainObject(c)?c:{id:c,name:e,num:d,price:f,expire:g};var d=h.num,i=this[b],j=!1;return i.length>0&&a.each(i,function(a,b){return b.id==h.id?(b.num+=h.num,b.num=Math.max(b.num,0),d=b.num,0===d&&i.splice(a,1),j=!0,!1):void 0}),!j&&h.num>0&&i.push(h),this._calMaterialPrice(),Math.max(d,0)}})}(mui,TS),function(a,b){a.os.plus&&(navigator.userAgent.match(/qihoo/i)&&(a.os.stream=!0),b.TS=a.extend(!0,b.TS,{url:"https://www.4000121777.com/api3",app_id:20,app_secret:"f45571c676e1fbe7d065f26aced7d666",map:"amap",placeholder:{banner:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",item:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDIxRjU5OUYzOThDMTFFNDhCOERFQkI3RjgzQUI1MUQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDIxRjU5QTAzOThDMTFFNDhCOERFQkI3RjgzQUI1MUQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEMjFGNTk5RDM5OEMxMUU0OEI4REVCQjdGODNBQjUxRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEMjFGNTk5RTM5OEMxMUU0OEI4REVCQjdGODNBQjUxRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrjfiygAAAdBSURBVHja7Jz/MzJd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"},cache:{image:"_doc/image/"},aniShow:"pop-in",data:{payment:[{title:"支付宝支付"},{title:"微信支付"}],share:[{title:"分享到微信好友"},{title:"分享到微信朋友圈"},{title:"分享到微博"}],invite:[{title:"通过微信好友邀请"},{title:"通过微信朋友圈邀请"},{title:"通过微博邀请"}]}}),b.TS.data.nav=[{id:"home",title:"首页",icon:"home",url:"page/index/index.html"},{id:"order",title:"订单",icon:"list",url:"page/order/order_main.html"},{id:"my",title:"我的",icon:"person",url:"page/my/my.html"}])}(mui,window),function(a,b){a.os.plus&&(b.isStatusbarOffset=function(){return a.os.ios&&parseFloat(a.os.version)>=7},b.showWaiting=function(){a.plusReady(function(){plus.nativeUI.showWaiting("",{padlock:!0})})},b.closeWaiting=function(){a.plusReady(function(){plus.nativeUI.closeWaiting()})},b.cs=function(b,c){b&&a.isFunction(b.captureSnapshot)&&(c=c||"default",b.captureSnapshot(c,function(){},function(a){}))},b.c=function(b,c){b&&a.isFunction(b.clearSnapshot)&&(c=c||"default",b.clearSnapshot(c))},a.plusReady(function(){b.d=Function.prototype.bind.call(console.log,console),b.open=function(a,c,d){b.Init.open(a,c,d)},b.openLogin=function(a){b.Init.open(b.loginUrl,{opener:plus.webview.currentWebview().id,from:a||""})}}),b.Init=b.Init.extend({initConfig:function(){this._super(),b.Image=new b.ImageClass,b.Share=new b.ShareClass(b.data.share)},initEvent:function(){var c=this,d=a.back;a.back=function(){var a=plus.webview.currentWebview().id;~["cart","combodetail"].indexOf(a)&&(b.debug&&b.d("..............clearSnapshot supplier................."),setTimeout(function(){b.debug&&b.d("setTimeout..............clearSnapshot supplier................."),b.c(plus.webview.getWebviewById("supplier"))},400)),d()},document.addEventListener("reset",function(){c.busying=!1}),a(document.body).on("tap","[data-share]",function(){var a=this.getAttribute("data-share-title"),c=this.getAttribute("data-share-content"),d=this.getAttribute("data-share-href");b.Share.shareAction({content:c||"",title:a||"",href:d||""})}),a(document.body).on("tap","a[data-href]",function(a){c.busying=!0;var d=a.target.tagName;if("BUTTON"===d||"INPUT"===d)return c.busying=!1,!1;var e=this.getAttribute("data-view"),f=this.getAttribute("data-href"),g=this.getAttribute("data-url"),h=this.getAttribute("data-show"),i=this.getAttribute("data-login"),j=this.getAttribute("data-address"),k=g||f,l=f;h=h||b.aniShow;var m={opener:plus.webview.currentWebview().id,id:this.getAttribute("data-id"),title:this.getAttribute("data-title"),url:l};return"true"==i?b.User.isLogin()?c.checkAddress(j,k,e,m,h):b.confirm("您当前还未登录，请登录",function(a){a&&c.open(b.loginUrl,m,h),c.busying=!1}):c.checkAddress(j,k,e,m,h),!1})},checkAddress:function(a,c,d,e,f){var g=this;"false"===a?b.Site.get_address()?g.open(c,d,e,f):b.confirm("您还未填写地址，请新增地址",function(a){a&&g.open(b.addressUrl)}):g.open(c,d,e,f)},open:function(c,d,e,f){var g=this;a.isPlainObject(d)&&(f=e,e=d,d=""),f=f||b.aniShow,b.handleOpen({href:c,view:d,params:e},function(){if(d){var h=plus.webview.getWebviewById(d);h?(b.showWaiting(),a.fire(h,d,e),h.show(f,300,function(){})):(b.error("webview["+d+"] is undefined"),g.busying=!1)}else if(c){a.os.plus&&a.os.android&&plus.nativeUI.showWaiting(),b.a.href=c;var i=c,j=c.match(/\/(.[^\/]*)\.html/);2===j.length&&(i=j[1]);var h=plus.webview.create(b.a.href,i,{popGesture:"close"});h.addEventListener("loaded",function(){b.debug&&b.d("webview["+h.id+"] showing:::::::"+f),h.show(f,300,function(){b.debug&&b.d("webview["+h.id+"] closeWaiting:::::::"+f),a.os.plus&&a.os.android&&plus.nativeUI.closeWaiting(),g.busying=!1,a.fire(h,"params",e)})})}else g.busying=!1},function(){g.busying=!1})},initOs:function(){this._super(),a.each(document.querySelectorAll(".mui-plus-hidden"),function(a,b){b.parentNode.removeChild(b)})}}))}(mui,TS),function(a,b){a.os.plus&&(b.LocationClass=b.LocationClass.extend({initConfig:function(){"undefined"!=typeof AMap&&AMap.service(["AMap.Geocoder"],function(){b.debug&&b.d("AMap.Geocoder is ready")})},getCurrentPosition:function(c,d){a.plusReady(function(){plus.geolocation.getCurrentPosition(function(a){c&&c(a)},function(a){b.debug&&b.d("getCurrentPosition["+b.map+"]:::"+JSON.stringify(a)),d&&d(a)},{timeout:1e4,provider:b.map})})}}))}(mui,TS),function(a,b){a.os.plus&&(b.LoginClass=b.LoginClass.extend({oauths:{},init:function(c){var d=this;a.plusReady(function(){plus.oauth.getServices(function(c){a.each(c,function(a,c){b.debug&&b.d(c.id),d.oauths[c.id]=c})},a.noop)})},loginByQihoo:function(a){this.loginByOAuth("qihoo",a)},loginByWechat:function(a){this.loginByOAuth("weixin",a)},loginBySina:function(a){this.loginByOAuth("sinaweibo",a)},loginByQq:function(a){b.error("暂不开放")},userinfo:function(a,b){var c={};return"weixin"===a?c=b:"sinaweibo"===a?c={openid:b.idstr,nickname:b.screen_name,headimgurl:b.profile_image_url,unionid:""}:"qq"===a&&(c={openid:"",nickname:b.nickname,headimgurl:b.figureurl_qq_1,unionid:""}),c},oauthLogin:function(a,c,d,e){b.debug&&b.d("oauthLogin:type:"+a+",userinfo:"+JSON.stringify(d)),b.Api.oauth_login({imei:plus.device.imei,oauth_type:"wexin"===a?1:2,oauth_uid:d.openid,oauth_token:c.access_token,oauth_token_secret:"",refresh_token:"",screenname:d.nickname,union_id:d.unionid,avatar:d.headimgurl},function(a){e&&e(a)},function(){e&&e(!1)})},loginByOAuth:function(a,c){var d=this,e=this.oauths[a];e?e.login(function(){e.getUserInfo(function(){var b=d.userinfo(a,e.userInfo);d.oauthLogin(a,e.authResult,b,function(a){c&&c(a,b)})},function(a){b.debug&&b.d("getUserInfo error:"+a.code+","+a.message),c&&c(!1)})},function(d){b.debug&&b.d("oauth["+a+"] login error:"+d.code+","+d.message),c&&c(!1)}):b.error("暂不支持["+a+"]登录")}}))}(mui,TS),function(a,b){a.os.plus&&(b.ImageClass=a.Class.extend({init:function(){this.path=b.cache.image},get:function(a,b,c){var d=this;"undefined"==typeof c&&(c=!0),cache.getItem(a,function(a){b(a)},function(){c?d.download(a,function(a){b(a)},function(){b(!1)}):b(!1)})},download:function(b,c,d){a.plusReady(function(){this.addDownload(b,c,d).start()}.bind(this))},addDownload:function(a,c,d){return b.debug&&b.d("download:"+a),plus.downloader.createDownload(a,{filename:this.path+a.substring(a.lastIndexOf("/")+1)},function(e,f){b.debug&&b.d("download.status:"+f),200==f?plus.io.resolveLocalFileSystemURL(e.filename,function(d){var e=d.toLocalURL();b.d(a+"|"+e),cache.setItem(a,e),c(e)},function(){d(!1)}):d(!1)})}}))}(mui,TS),function(a,b){a.os.plus&&(b.ShareClass=a.Class.extend({shares:{},init:function(b){var c=this;c.buttons=b,a.plusReady(function(){c.updateSerivces()})},shareAction:function(b){var c=this;plus.nativeUI.actionSheet({cancel:"取消",buttons:c.buttons},function(d){var e=d.index;switch(e){case 1:c.share("weixin",a.extend(!0,{},b,{extra:{scene:"WXSceneSession"}}));break;case 2:b.title=b.content,c.share("weixin",a.extend(!0,{},b,{extra:{scene:"WXSceneTimeline"}}));break;case 3:b.content=b.content+" "+b.href,c.share("sinaweibo",a.extend(!0,{},b))}})},share:function(a,c){var d=this,e=d.shares[a];return e?void(e.authenticated?d._share(e,c):e.authorize(function(){d._share(e,c)},function(a){b.error("认证授权失败")})):void b.error("无效的分享服务["+a+"]")},_share:function(a,c){a.send(c,function(){b.toast('分享到"'+a.description+'"成功！')},function(c){b.toast('分享到"'+a.description+'"失败！')})},updateSerivces:function(){var c=this;plus.share.getServices(function(b){c.shares={},a.each(b,function(a,b){c.shares[b.id]=b})},function(a){b.error("获取分享服务列表失败："+a.message)})}}))}(mui,TS),function(a,b){b.PaymentClass=a.Class.extend({channels:{},init:function(a){var b=this;b.buttons=a,b.updateChannels()},payAction:function(a,c){b.error("暂不支持")},pay:function(a,b,c){},getStatement:function(a,b,c){},updateChannels:function(){},checkService:function(a){}})}(mui,TS),function(a,b){a.os.plus&&(b.PaymentClass=b.PaymentClass.extend({channels:{},init:function(b){var c=this;c.buttons=b,a.plusReady(function(){c.updateChannels()})},payAction:function(a,b){var c=this;plus.nativeUI.actionSheet({cancel:"取消",buttons:c.buttons},function(d){var e=d.index;switch(e){case 0:b(!1);break;case 1:c.pay("alipay",a,b);break;case 2:c.pay("wxpay",a,b)}})},pay:function(a,c,d){var e=this,f=e.channels[a];return f?void(e.checkService(f)&&(b.showWaiting(),e.getStatement(a,c,function(c){c?(b.debug&&b.d("["+a+"] statement:::"+c),plus.payment.request(f,c,function(a){b.closeWaiting(),b.error("支付成功"),d&&d(!0)},function(a){b.closeWaiting(),b.error("支付失败：["+a.code+"]："+a.message),d&&d(!1)})):b.closeWaiting()}))):void b.error("不支持此支付通道")},_getStatement:function(b,c,d){var e="http://demo.dcloud.net.cn/payment/"+b;a.ajax({type:"get",url:e,data:c,success:function(a){d&&d(a)},error:function(){d&&d(!1)}})},getStatement:function(a,c,d){"wxpay"===a?b.Api.weixin_pay(c.order_no,c.user_ip,function(a){d&&d(JSON.stringify(a.data))},function(){d&&d(!1)}):"alipay"===a&&b.Api.ali_pay(c.order_no,c.user_ip,function(a){var b=a.data,c=[];if(b)for(var e=["sign"],f=["service","partner","_input_charset","notify_url","out_trade_no","subject","payment_type","seller_id","total_fee","body","it_b_pay","sign","sign_type"],g=0,h=f.length;h>g;g++){var i=f[g],j=b[i];~e.indexOf(i)&&(j=encodeURIComponent(j)),c.push(i+'="'+j+'"')}d&&d(c.join("&"))},function(){d&&d(!1)})},updateChannels:function(){
var c=this;c.channels={},plus.payment.getChannels(function(b){a.each(b,function(a,d){for(var e in b)c.channels[d.id]=d})},function(a){b.error("获取支付通道失败："+a.code+"|"+a.message)})},checkService:function(a){if(!a.serviceReady){var b=null;switch(a.id){case"alipay":b="检测到系统未安装“支付宝快捷支付服务”，无法完成支付操作，是否立即安装？";break;default:b="系统未安装“"+a.description+"”服务，无法完成支付，是否立即安装？"}return plus.nativeUI.confirm(b,function(b){0==b.index&&a.installService()},a.description),!1}return!0}}))}(mui,TS),function(a,b){a.os.plus&&(b.AppObject={init:function(){this.initConfig(),this.initPage(),this._init5plusEvent(),this.initEvent()},_init5plusEvent:function(){var a=this;a.init5plusEvent()},init5plusEvent:function(){}})}(mui,TS),function(a,b){b.UserPage=a.Class.extend({init:function(){this.initConfig(),this.initPage(),this.initEvent()},initConfig:function(){},initPage:function(){b.User.isLogin()||b.openLogin(document.location.href.split("#")[0])},initEvent:function(){}})}(mui,TS);